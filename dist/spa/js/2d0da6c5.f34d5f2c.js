(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["2d0da6c5"],{"6c13":function(e,r,a){"use strict";a.r(r);var s=function(){var e=this,r=e.$createElement,a=e._self._c||r;return e.SHOW?a("q-page",{staticClass:"form-page row justify-center",attrs:{padding:""}},[a("q-card",{staticClass:"main-box self-start",attrs:{inline:"",dark:e.LAYOUT.isDark}},[a("q-card-section",[a("form-header",{attrs:{title:e.FORM.title(),subtitle:e.FORM.subtitle()}},[a("template",{slot:"menu-item"},[e.$route.params.id?a("list-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:e.$tc("label.remove"),icon:"delete",clickable:""},on:{click:e.FORM.delete}}):e._e()],1)],2)],1),a("q-card-section",[a("div",{staticClass:"row q-col-gutter-sm "},[a("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:5",expression:"'required|min:5'"}],staticClass:"col-sm-6",attrs:{name:"name",label:"Name",readonly:e.IS_ADMIN,dark:e.LAYOUT.isDark,error:e.errors.has("name"),"error-message":e.errors.first("name")},model:{value:e.rsForm.name,callback:function(r){e.$set(e.rsForm,"name",r)},expression:"rsForm.name"}}),a("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"col-sm-6",attrs:{name:"email",label:"Email",type:"email",dark:e.LAYOUT.isDark,error:e.errors.has("email"),"error-message":e.errors.first("email")},model:{value:e.rsForm.email,callback:function(r){e.$set(e.rsForm,"email",r)},expression:"rsForm.email"}}),"edit"!==e.$route.meta.mode?a("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:8",expression:"'required|min:8'"}],staticClass:"col-sm-6",attrs:{name:"password",label:"Password",type:"password",dark:e.LAYOUT.isDark,error:e.errors.has("password"),"error-message":e.errors.first("password")},model:{value:e.rsForm.password,callback:function(r){e.$set(e.rsForm,"password",r)},expression:"rsForm.password"}}):e._e(),"edit"!==e.$route.meta.mode?a("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"col-sm-6",attrs:{name:"password_confirmation",label:"Confirm Password",type:"password",dark:e.LAYOUT.isDark,error:e.errors.has("password_confirmation"),"error-message":e.errors.first("password_confirmation")},model:{value:e.rsForm.password_confirmation,callback:function(r){e.$set(e.rsForm,"password_confirmation",r)},expression:"rsForm.password_confirmation"}}):e._e(),a("div",{staticClass:"col-12"},[a("q-list",[a("q-expansion-item",{attrs:{label:"RULES","expand-separator":""}},[a("div",{staticClass:"row q-gutter-sm "},e._l(e.RoleOptions,function(r,s){return a("q-checkbox",{key:s,staticClass:"col-12 col-sm-6 col-md-3",attrs:{dark:e.LAYOUT.isDark,val:r.value,label:r.value,readonly:e.IS_ADMIN},model:{value:e.rsForm.has_role,callback:function(r){e.$set(e.rsForm,"has_role",r)},expression:"rsForm.has_role"}})}),1)]),a("q-expansion-item",{attrs:{label:"PERMISSION","expand-separator":""}},[a("div",{staticClass:"row q-gutter-sm "},e._l(e.PermissionOptions,function(r,s){return a("q-checkbox",{key:s,staticClass:"col-12 col-sm-6 col-md-3",attrs:{dark:e.LAYOUT.isDark,val:r.value,label:r.value,readonly:e.IS_ADMIN},model:{value:e.rsForm.has_permission,callback:function(r){e.$set(e.rsForm,"has_permission",r)},expression:"rsForm.has_permission"}})}),1)])],1)],1)],1)]),a("q-separator"),a("q-card-actions",{staticClass:"q-mx-lg"},[a("q-btn",{attrs:{color:"grey-8"},on:{click:function(r){return e.FORM.toBack()}}},[e._v("Cancel")]),a("q-btn",{attrs:{color:"grey-5"},on:{click:function(r){return e.setForm(e.FORM.data)}}},[e._v("Reset")]),a("q-btn",{attrs:{color:"positive"},on:{click:function(r){return e.onSave()}}},[e._v("Save")])],1)],1),a("q-inner-loading",{attrs:{showing:e.FORM.loading,dark:e.LAYOUT.isDark}},[a("q-spinner-dots",{attrs:{size:"70px",color:"primary"}})],1)],1):e._e()},t=[],o=(a("551c"),a("06db"),a("097d"),a("7f7f"),a("0ce1")),i={mixins:[o["a"]],data:function(){return{SHEET:{roles:{data:[],api:"/api/v1/auth/roles?mode=all"},permissions:{data:[],api:"/api/v1/auth/permissions?mode=all"}},FORM:{resource:{api:"/api/v1/auth/users",uri:"/admin/configuration/auth/users"}},rsForm:{},setDefault:function(){return{name:null,email:null,password:null,password_confirmation:null,has_role:[],has_permission:[]}}}},created:function(){this.init()},computed:{IS_ADMIN:function(){return 1===this.rsForm.id},RoleOptions:function(){return this.SHEET.roles.data.map(function(e){return{label:e.name,value:e.name}})},PermissionOptions:function(){return this.SHEET.permissions.data.map(function(e){return{label:e.name,value:e.name}})}},watch:{$route:"init"},methods:{init:function(){var e=this;this.SHOW=!1,this.FORM.load(function(r){e.setForm(r),setTimeout(function(){e.SHOW=!0},500)})},setForm:function(e){this.rsForm=JSON.parse(JSON.stringify(e))},onSave:function(){var e=this;this.$validator.validate().then(function(r){if(r){e.FORM.loading=!0;var a=e.FORM.meta(),s=a.method,t=(a.mode,a.apiUrl);e.$axios.set(s,t,e.rsForm).then(function(r){var a=r.data.name+" - #"+r.data.id;e.FORM.response.success({message:a}),e.FORM.toIndex()}).catch(function(r){e.FORM.response.fields(r.response),e.FORM.response.error(r.response,"Submit")}).finally(function(){e.FORM.loading=!1})}else e.$q.notify({color:"negative",icon:"error",position:"top-right",timeout:3e3,message:"Please complete the form fields"})})}}},n=i,l=a("2877"),m=Object(l["a"])(n,s,t,!1,null,null,null);r["default"]=m.exports}}]);