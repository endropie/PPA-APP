(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["2d0e53d4"],{9447:function(e,r,i){"use strict";i.r(r);var a=function(){var e=this,r=e.$createElement,i=e._self._c||r;return e.SHOW?i("q-page",{staticClass:"form-page row justify-center",attrs:{padding:""}},[i("q-card",{staticClass:"main-box self-start",class:{"bg-grey-9":e.LAYOUT.isDark},attrs:{inline:"",dark:e.LAYOUT.isDark}},[i("q-card-section",[i("form-header",{attrs:{title:e.FORM.title(),subtitle:e.FORM.subtitle()}},[i("template",{slot:"menu-item"},[e.$route.params.id?i("list-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:e.$tc("label.remove"),icon:"delete",clickable:""},on:{click:e.FORM.delete}}):e._e()],1)],2)],1),i("q-separator",{attrs:{dark:e.LAYOUT.isDark}}),i("q-card-section",{staticClass:"row q-col-gutter-sm"},[i("div",{staticClass:"col-12 col-sm-6"},[i("div",{staticClass:"column"},[i("select-filter",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"customer_id",label:e.$tc("general.customer"),dark:e.LAYOUT.isDark,options:e.CustomerOptions,"select-filter":"","options-cover":"",clearable:"","use-input":"","fill-input":"","hide-selected":"","emit-value":"","map-options":"",error:e.errors.has("customer_id"),"error-message":e.errors.first("customer_id")},on:{input:e.setCode},model:{value:e.rsForm.customer_id,callback:function(r){e.$set(e.rsForm,"customer_id",r)},expression:"rsForm.customer_id"}}),i("select-filter",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"brand_id",label:e.$tc("general.brand"),dark:e.LAYOUT.isDark,options:e.BrandOptions,"input-debounce":"0",error:e.errors.has("brand_id"),"error-message":e.errors.first("brand_id")},on:{input:e.setCode},model:{value:e.rsForm.brand_id,callback:function(r){e.$set(e.rsForm,"brand_id",r)},expression:"rsForm.brand_id"}}),i("select-filter",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"specification_id",label:e.$tc("items.specification"),dark:e.LAYOUT.isDark,options:e.SpecificationOptions,error:e.errors.has("specification_id"),"error-message":e.errors.first("specification_id")},on:{input:e.setCode},model:{value:e.rsForm.specification_id,callback:function(r){e.$set(e.rsForm,"specification_id",r)},expression:"rsForm.specification_id"}})],1)]),i("div",{staticClass:"col-12 col-sm-6"},[i("div",{staticClass:"column"},[i("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"col-12",attrs:{name:"code",label:"Intern Code [auto generate]",disable:"",dark:e.LAYOUT.isDark,icon:"code",error:e.errors.has("code"),"error-message":e.errors.first("code")},model:{value:e.rsForm.code,callback:function(r){e.$set(e.rsForm,"code",r)},expression:"rsForm.code"}}),i("select-filter",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"col-12",attrs:{name:"category_item_id",label:"Category of Items",icon:"table_chart",dark:e.LAYOUT.isDark,options:e.CategoyOptions,error:e.errors.has("category_item_id"),"error-message":e.errors.first("category_item_id")},model:{value:e.rsForm.category_item_id,callback:function(r){e.$set(e.rsForm,"category_item_id",r)},expression:"rsForm.category_item_id"}}),i("select-filter",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"col-12",attrs:{name:"type_item_id",label:"Type of Items",icon:"dehaze",dark:e.LAYOUT.isDark,options:e.TypeOptions,error:e.errors.has("type_item_id"),"error-message":e.errors.first("type_item_id")},model:{value:e.rsForm.type_item_id,callback:function(r){e.$set(e.rsForm,"type_item_id",r)},expression:"rsForm.type_item_id"}})],1)])]),i("q-separator",{staticClass:"inset-md",attrs:{spaced:"",dark:e.LAYOUT.isDark}}),i("q-card-section",{staticClass:"row q-col-gutter-sm"},[i("div",{staticClass:"col-12 col-sm-6"},[i("div",{staticClass:"column q-col-gutter-sm"},[i("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"col-12",attrs:{name:"part_number",label:"Part Number",icon:"layers",error:e.errors.has("part_number"),"error-message":e.errors.first("part_number"),dark:e.LAYOUT.isDark},model:{value:e.rsForm.part_number,callback:function(r){e.$set(e.rsForm,"part_number",r)},expression:"rsForm.part_number"}}),i("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"col-12",attrs:{name:"part_name",label:"Part name",dark:e.LAYOUT.isDark,icon:"label",error:e.errors.has("part_name"),"error-message":e.errors.first("part_name")},model:{value:e.rsForm.part_name,callback:function(r){e.$set(e.rsForm,"part_name",r)},expression:"rsForm.part_name"}}),i("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"}],staticClass:"col-12",attrs:{name:"part_alias",label:"Part alias Finished",dark:e.LAYOUT.isDark,icon:"beenhere",error:e.errors.has("part_alias"),"error-message":e.errors.first("part_alias")},model:{value:e.rsForm.part_alias,callback:function(r){e.$set(e.rsForm,"part_alias",r)},expression:"rsForm.part_alias"}})],1)]),i("div",{staticClass:"col-6 col-sm-3"},[i("div",{staticClass:"row q-col-gutter-sm"},[i("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"col-12",attrs:{name:"packing_duration",label:"Packing duration",type:"number",icon:"timer",dark:e.LAYOUT.isDark,error:e.errors.has("packing_duration"),"error-message":e.errors.first("packing_duration")},model:{value:e.rsForm.packing_duration,callback:function(r){e.$set(e.rsForm,"packing_duration",r)},expression:"rsForm.packing_duration"}}),i("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"col-12",attrs:{name:"sa_area",label:"SA area",type:"number",dark:e.LAYOUT.isDark,color:"dark",error:e.errors.has("sa_area"),"error-message":e.errors.first("sa_area")},model:{value:e.rsForm.sa_area,callback:function(r){e.$set(e.rsForm,"sa_area",r)},expression:"rsForm.sa_area"}}),i("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"col-12",attrs:{name:"weight",label:"Weight",type:"number",dark:e.LAYOUT.isDark,error:e.errors.has("weight"),"error-message":e.errors.first("weight")},model:{value:e.rsForm.weight,callback:function(r){e.$set(e.rsForm,"weight",r)},expression:"rsForm.weight"}})],1)]),i("div",{staticClass:"col-6 col-sm-3"},[i("div",{staticClass:"row q-col-gutter-sm "},[i("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"col-12",attrs:{name:"number_hanger",label:"units of each hanger",type:"number",dark:e.LAYOUT.isDark,error:e.errors.has("number_hanger"),"error-message":e.errors.first("number_hanger")},model:{value:e.rsForm.number_hanger,callback:function(r){e.$set(e.rsForm,"number_hanger",r)},expression:"rsForm.number_hanger"}}),i("select-filter",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"col-12",attrs:{name:"size_id",label:"Size",dark:e.LAYOUT.isDark,options:e.SizeOptions,icon:"format_size",error:e.errors.has("size_id"),"error-message":e.errors.first("size_id")},model:{value:e.rsForm.size_id,callback:function(r){e.$set(e.rsForm,"size_id",r)},expression:"rsForm.size_id"}}),i("select-filter",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"col-12",attrs:{name:"unit_id",label:"Unit",dark:e.LAYOUT.isDark,options:e.UnitOptions,icon:"web_asset",error:e.errors.has("unit_id"),"error-message":e.errors.first("unit_id")},model:{value:e.rsForm.unit_id,callback:function(r){e.$set(e.rsForm,"unit_id",r)},expression:"rsForm.unit_id"}})],1)]),i("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"col-12 col-sm-4",attrs:{name:"price",label:"Normal Price",type:"number",standout:"",filled:"",dark:"",color:"white","bg-color":"primary",align:"center",error:e.errors.has("price"),"error-message":e.errors.first("price")},model:{value:e.rsForm.price,callback:function(r){e.$set(e.rsForm,"price",r)},expression:"rsForm.price"}}),i("q-input",{staticClass:"col-12 col-sm-4",attrs:{name:"price_area",label:"Price in DM",type:"number",value:e.price_area,standout:"",filled:"",dark:"",color:"white","bg-color":"primary",align:"center",error:e.errors.has("price_area"),"error-message":e.errors.first("price_area")}}),i("q-input",{staticClass:"col-12 col-sm-4",attrs:{name:"price_packaged",label:"Price in BRL",type:"number",value:e.price_packaged,standout:"",filled:"",dark:"",color:"white","bg-color":"primary",align:"center",error:e.errors.has("price_packaged"),"error-message":e.errors.first("price_packaged")}})],1),i("q-separator",{staticClass:"inset-md",attrs:{spaced:"",dark:e.LAYOUT.isDark}}),i("q-card-section",{staticClass:"row q-col-gutter-md"},[i("div",{staticClass:"col-12 col-sm-6"},[i("q-list",{staticClass:"q-pa-xs ",attrs:{bordered:"",dense:""}},[i("q-item-label",{attrs:{header:""}},[e._v("Pre Line Production")]),e._l(e.rsForm.item_prelines,function(r,a){return i("q-item",{key:a},[i("q-item-section",[i("select-filter",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"pre-line-"+a,dark:e.LAYOUT.isDark,inverted:"",dense:"",color:"primary",prefix:a+1+". ",options:e.LineOptions,error:e.errors.has("pre-line-"+a),"error-message":e.errors.first("pre-line-"+a)},model:{value:e.rsForm.item_prelines[a].line_id,callback:function(r){e.$set(e.rsForm.item_prelines[a],"line_id",r)},expression:"rsForm.item_prelines[index].line_id"}})],1),i("q-item-section",{attrs:{side:""}},[i("q-btn",{attrs:{dense:"",flat:"",round:"",icon:"clear",color:"red-5"},on:{click:function(r){return e.removeProduction(a)}}})],1)],1)}),i("q-item",[i("q-item-section",[i("q-btn",{attrs:{dense:"",outline:"",color:"primary",label:e.$t("label.new",{v:e.$t("label.production")})},on:{click:function(r){return e.addNewProduction()}}})],1)],1)],2)],1),i("div",{staticClass:"col-12 col-sm-6"},[i("q-list",{staticClass:"q-pa-xs",attrs:{bordered:"",dense:""}},[i("q-item-label",{attrs:{header:""}},[e._v("Unit Convertion")]),e._l(e.rsForm.item_units,function(r,a){return i("q-item",{key:a},[i("q-item-section",[i("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"unit-"+a,type:"number",dense:"",dark:e.LAYOUT.isDark,error:e.errors.has("unit-"+a),"error-message":e.errors.first("unit-"+a)},model:{value:e.rsForm.item_units[a].rate,callback:function(r){e.$set(e.rsForm.item_units[a],"rate",r)},expression:"rsForm.item_units[index].rate"}},[i("template",{slot:"prepend"},[i("q-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"no-padding text-white",staticStyle:{width:"100px"},attrs:{name:"unit-"+a,placeholder:e.$tc("label.select"),prefix:" 1-",dense:"",borderless:"","emit-value":"","map-options":"","options-dense":"",options:e.UnitOptions,dark:e.LAYOUT.isDark,error:e.errors.has("unit-"+a),"error-message":e.errors.first("unit-"+a)},model:{value:e.rsForm.item_units[a].unit_id,callback:function(r){e.$set(e.rsForm.item_units[a],"unit_id",r)},expression:"rsForm.item_units[index].unit_id"}}),i("span",{staticClass:"text-caption"},[e._v(e._s(e.$tc("label.rate")))]),i("q-icon",{attrs:{size:"24px",name:"arrow_right_alt"}})],1)],2)],1),i("q-item-section",{attrs:{side:""}},[i("q-btn",{attrs:{dense:"",round:"",flat:"",icon:"clear",color:"red-4"},on:{click:function(r){return e.removeUnit(a)}}})],1)],1)}),i("q-item",{},[i("q-item-section",[i("q-btn",{attrs:{dense:"",outline:"",color:"primary",label:e.$t("label.new",{v:e.$t("label.production")})},on:{click:function(r){return e.addNewUnit()}}})],1)],1)],2)],1),i("q-input",{staticClass:"col-12",attrs:{label:e.$tc("label.description"),filled:"",type:"textarea",rows:"3",dark:e.LAYOUT.isDark},model:{value:e.rsForm.description,callback:function(r){e.$set(e.rsForm,"description",r)},expression:"rsForm.description"}})],1),i("q-separator",{attrs:{dark:e.LAYOUT.isDark,spaced:""}}),i("q-card-actions",{staticClass:"group float-right"},[i("q-btn",{attrs:{label:e.$tc("label.cancel"),icon:"cancel",color:"dark"},on:{click:function(r){return e.FORM.toBack()}}}),i("q-btn",{attrs:{label:e.$tc("label.reset"),icon:"refresh",color:"light"},on:{click:function(r){return e.setForm(e.FORM.data)}}}),i("q-btn",{attrs:{label:e.$tc("label.save"),icon:"save",color:"positive",loading:e.FORM.loading},on:{click:function(r){return e.onSave()}}},[i("q-spinner-facebook",{attrs:{slot:"loading"},slot:"loading"})],1)],1)],1),i("q-inner-loading",{attrs:{showing:e.FORM.loading,dark:e.LAYOUT.isDark}},[i("q-spinner-dots",{attrs:{size:"70px",color:"primary"}})],1)],1):e._e()},t=[],s=(i("551c"),i("06db"),i("097d"),i("c5f6"),i("7f7f"),i("0ce1")),o={mixins:[s["a"]],data:function(){return{SHEET:{colors:{data:[],api:"/api/v1/references/colors?mode=all"},type_items:{data:[],api:"/api/v1/references/type_items?mode=all"},category_items:{data:[],api:"/api/v1/references/category_items?mode=all"},sizes:{data:[],api:"/api/v1/references/sizes?mode=all"},units:{data:[],api:"/api/v1/references/units?mode=all"},brands:{data:[],api:"/api/v1/references/brands?mode=all"},specifications:{data:[],api:"/api/v1/references/specifications?mode=all"},customers:{data:[],api:"/api/v1/incomes/customers?mode=all"},lines:{data:[],api:"/api/v1/references/lines?mode=all"}},FORM:{resource:{uri:"/admin/common/items",api:"/api/v1/common/items"}},rsForm:{},setDefault:function(){return{code:null,customer_id:null,brand_id:null,specification_id:null,part_name:null,part_alias:null,part_number:null,number_hanger:null,packing_duration:null,sa_area:null,weight:null,category_item_id:null,type_item_id:null,size_id:null,unit_id:null,price:null,item_prelines:[{id:null,line_id:null,note:null}],item_units:[{id:null,unit_id:null,rate:null}],item_contacts:[{id:null}],enable:!0,description:null}}}},created:function(){this.init()},computed:{LineOptions:function(){return this.SHEET.lines.data.map(function(e){return{label:e.name,value:e.id}})||[]},CategoyOptions:function(){return this.SHEET.category_items.data.map(function(e){return{label:e.name,value:e.id}})||[]},TypeOptions:function(){return this.SHEET.type_items.data.map(function(e){return{label:e.name,value:e.id}})||[]},CustomerOptions:function(){return this.SHEET.customers.data.map(function(e){return{label:[e.code,e.name].join(" - "),value:e.id}})||[]},BrandOptions:function(){return this.SHEET.brands.data.map(function(e){return{label:[e.code,e.name].join(" - "),value:e.id}})||[]},SpecificationOptions:function(){return this.SHEET.specifications.data.map(function(e){return{label:[e.code,e.name].join(" - "),value:e.id}})||[]},SizeOptions:function(){return this.SHEET.sizes.data.map(function(e){return{label:e.name,value:e.id}})||[]},UnitOptions:function(){return this.SHEET.units.data.map(function(e){return{label:e.code,value:e.id}})||[]},price_area:function(){return Number(this.rsForm.price)&&Number(this.rsForm.sa_area)?Number(this.rsForm.price)/Number(this.rsForm.sa_area):0},price_packaged:function(){return Number(this.rsForm.number_hanger||0)*Number(this.rsForm.price||0)},MAPINGKEY:function(){var e={brands:{},customers:{},specifications:{}};return this.SHEET["brands"].data.map(function(r){e["brands"][r.id]=r}),this.SHEET["customers"].data.map(function(r){e["customers"][r.id]=r}),this.SHEET["specifications"].data.map(function(r){e["specifications"][r.id]=r}),e}},watch:{$route:"init"},methods:{init:function(){var e=this;this.SHOW=!1,this.FORM.load(function(r){e.setForm(r),setTimeout(function(){e.SHOW=!0},500)})},setForm:function(e){this.rsForm=JSON.parse(JSON.stringify(e))},setCode:function(){this.rsForm.brand_id,this.rsForm.customer_id,this.rsForm.specification_id;var e=this.MAPINGKEY["brands"][this.rsForm.brand_id]||{},r=this.MAPINGKEY["customers"][this.rsForm.customer_id]||{},i=this.MAPINGKEY["specifications"][this.rsForm.specification_id]||{};this.rsForm["code"]=[r.code,e.code,i.code].join("-")},addNewProduction:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0];var e=this.setDefault().item_prelines[0];this.rsForm.item_prelines.push(e)},removeProduction:function(e){this.rsForm.item_prelines.splice(e,1),this.rsForm.item_prelines.length<1&&this.addNewProduction()},addNewUnit:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0];var e=this.setDefault().item_units[0];this.rsForm.item_units.push(e)},removeUnit:function(e){this.rsForm.item_units.splice(e,1)},onSave:function(){var e=this;this.$validator.validate().then(function(r){if(r){e.FORM.loading=!0;var i=e.FORM.meta(),a=i.method,t=(i.mode,i.apiUrl);e.$axios.set(a,t,e.rsForm).then(function(r){var i=r.data.code+" - #"+r.data.id;e.FORM.response.success({message:i}),e.FORM.toIndex()}).catch(function(r){console.warn(r),e.FORM.response.fields(r.response),e.FORM.response.error(r.response,"Submit")}).finally(function(){e.FORM.loading=!1})}else e.$q.notify({color:"negative",icon:"error",position:"top-right",timeout:3e3,message:"Please complete the form fields"})})}}},n=o,l=i("2877"),c=Object(l["a"])(n,a,t,!1,null,null,null);r["default"]=c.exports}}]);