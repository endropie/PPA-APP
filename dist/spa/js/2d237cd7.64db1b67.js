(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["2d237cd7"],{fd58:function(e,r,t){"use strict";t.r(r);var s=function(){var e=this,r=e.$createElement,t=e._self._c||r;return e.SHOW?t("q-page",{staticClass:"form-page row justify-center",attrs:{padding:""}},[t("q-card",{staticClass:"main-box self-start",attrs:{inline:"",dark:e.LAYOUT.isDark}},[t("q-card-section",[t("form-header",{attrs:{title:e.FORM.title(),subtitle:e.FORM.subtitle()}},[t("template",{slot:"menu-item"},[e.$route.params.id?t("list-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:e.$tc("label.remove"),icon:"delete",clickable:""},on:{click:e.FORM.delete}}):e._e()],1)],2)],1),t("q-card-section",[t("div",{staticClass:"row q-col-gutter-sm q-gutter-x-lg q-mb-lg"},[t("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"col-12 col-sm-6",attrs:{name:"code",label:e.$tc("label.code"),dark:e.LAYOUT.isDark,error:e.errors.has("code"),"error-message":e.errors.first("code")},model:{value:e.rsForm.code,callback:function(r){e.$set(e.rsForm,"code",r)},expression:"rsForm.code"}}),t("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"col-12 col-sm-6",attrs:{name:"name",label:e.$tc("label.name"),dark:e.LAYOUT.isDark,error:e.errors.has("name"),"error-message":e.errors.first("name")},model:{value:e.rsForm.name,callback:function(r){e.$set(e.rsForm,"name",r)},expression:"rsForm.name"}}),t("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"col-12 col-sm-4",attrs:{name:"times_spray_white",label:e.$tc("items.white_spray"),hint:e.$tc("label.in",1,{v:e.$tc("label.second",2)}),type:"number",dark:e.LAYOUT.isDark,error:e.errors.has("times_spray_white"),"error-message":e.errors.first("times_spray_white")},model:{value:e.rsForm.times_spray_white,callback:function(r){e.$set(e.rsForm,"times_spray_white",r)},expression:"rsForm.times_spray_white"}}),t("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"col-12 col-sm-4",attrs:{name:"times_spray_red",label:e.$tc("items.red_spray"),hint:e.$tc("label.in",1,{v:e.$tc("label.second",2)}),type:"number",dark:e.LAYOUT.isDark,error:e.errors.has("times_spray_red"),"error-message":e.errors.first("times_spray_red")},model:{value:e.rsForm.times_spray_red,callback:function(r){e.$set(e.rsForm,"times_spray_red",r)},expression:"rsForm.times_spray_red"}}),t("q-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"col-12 col-sm-4",attrs:{name:"color_id",label:e.$tc("label.color"),dark:e.LAYOUT.isDark,options:e.ColorOptions,"map-options":"",error:e.errors.has("color_id"),"error-message":e.errors.first("color_id")},model:{value:e.rsForm.color_id,callback:function(r){e.$set(e.rsForm,"color_id",r)},expression:"rsForm.color_id"}}),t("q-input",{staticClass:"col-12 q-mb-md",attrs:{label:e.$tc("label.description"),type:"textarea",rows:"3",dense:"",dark:e.LAYOUT.isDark},model:{value:e.rsForm.description,callback:function(r){e.$set(e.rsForm,"description",r)},expression:"rsForm.description"}}),t("div",{staticClass:"col-12"},[t("form-detail",{attrs:{list:e.$q.screen.lt.md,title:e.$tc("label.of",2,{b:e.$tc("items.specification",2),a:e.$tc("label.detail")}),columns:[{name:"thick",label:"Label Thick"},{name:"plate",label:"Label Plate"}],data:e.rsForm.specification_details,"label-new":e.$t("label.new",{v:e.$tc("items.specification")}),"new-data":{id:null,plate:null,thick:null},dark:e.LAYOUT.isDark,"min-length":"-1"},scopedSlots:e._u([{key:"field-thick",fn:function(r){return[t("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"col-12 col-sm-3",attrs:{name:"specification_details."+r.row.__index+".thick",label:e.$tc("items.thick",2),type:"number",filled:"",dense:"","hide-bottom-space":"",dark:e.LAYOUT.isDark,error:e.errors.has("specification_details."+r.row.__index+".plate"),"error-message":e.errors.first("specification_details."+r.row.__index+".plate")},model:{value:r.row.thick,callback:function(t){e.$set(r.row,"thick",t)},expression:"rs.row.thick"}})]}},{key:"field-plate",fn:function(r){return[t("q-input",{staticClass:"col-12 col-sm-9",attrs:{name:"specification_details."+r.row.__index+".plate",label:e.$tc("label.name",3,{v:e.$tc("items.plate")}),filled:"",dense:"","hide-bottom-space":"",dark:e.LAYOUT.isDark,error:e.errors.has("specification_details."+r.row.__index+".plate"),"error-message":e.errors.first("specification_details."+r.row.__index+".plate")},model:{value:r.row.plate,callback:function(t){e.$set(r.row,"plate",t)},expression:"rs.row.plate"}})]}}],null,!1,2798410989)})],1)],1)]),t("q-separator",{attrs:{dark:e.LAYOUT.isDark}}),t("q-card-actions",{staticClass:"group float-right"},[t("q-btn",{attrs:{label:e.$tc("label.cancel"),icon:"cancel",color:"dark"},on:{click:function(r){return e.FORM.toBack()}}}),t("q-btn",{attrs:{label:e.$tc("label.reset"),icon:"refresh",color:"light"},on:{click:function(r){return e.FORM.reset()}}}),t("q-btn",{attrs:{label:e.$tc("label.save"),icon:"save",color:"positive"},on:{click:function(r){return e.onSave()}}})],1)],1),t("q-inner-loading",{attrs:{showing:e.FORM.loading,dark:e.LAYOUT.isDark}},[t("q-spinner-dots",{attrs:{size:"70px",color:"primary"}})],1)],1):e._e()},a=[],i=(t("551c"),t("06db"),t("097d"),t("7f7f"),t("0ce1")),l={mixins:[i["a"]],data:function(){return{test:null,selected:[],SHEET:{colors:{data:[],api:"/api/v1/references/colors?mode=all"}},FORM:{resource:{uri:"/admin/references/specifications",api:"/api/v1/references/specifications"}},rsForm:{},setDefault:function(){return{name:null,description:null,color_id:null,times_spray_white:null,times_spray_red:null,specification_details:[{id:null}],thick_1:null,plate_1:null,thick_2:null,plate_2:null,thick_3:null,plate_3:null,thick_4:null,plate_4:null}}}},created:function(){this.init()},computed:{ColorOptions:function(){return this.SHEET.colors.data.map(function(e){return{label:e.name,value:e.id}})||[]}},watch:{$route:"init"},methods:{init:function(){var e=this;this.SHOW=!1,this.FORM.load(function(r){e.setForm(r),setTimeout(function(){e.SHOW=!0},500)})},setForm:function(e){this.rsForm=JSON.parse(JSON.stringify(e))},routing:function(){var e=this;if("edit"===this.$route.meta.mode){this.FORM.loading=!0;var r=this.FORM.resource.api+"/"+this.$route.params.id;this.$axios.get(r).then(function(r){e.rsForm=r.data,e.FORM.show=!0,e.FORM.loading=!1}).catch(function(r){console.warn("[FORM:routing]",r),e.$app.response.error(r.response,"Load Form")})}else this.rsForm=this.setDefault(),this.FORM.show=!0},addNewDetail:function(){var e={id:null};this.rsForm.specification_details.push(e)},removeDetail:function(e){this.rsForm.specification_details.splice(e,1)},onSave:function(){var e=this;this.$validator.validate().then(function(r){if(r){e.FORM.loading=!0;var t=e.FORM.meta(),s=t.method,a=(t.mode,t.apiUrl);e.$axios.set(s,a,e.rsForm).then(function(r){var t=r.data.name+" - #"+r.data.id;e.FORM.response.success({message:t}),e.FORM.toIndex()}).catch(function(r){e.FORM.response.fields(r.response),e.FORM.response.error(r.response,"Submit")}).finally(function(){e.FORM.loading=!1})}else e.$q.notify({color:"negative",icon:"error",position:"top-right",timeout:3e3,message:"Please complete the form fields"})})}}},o=l,n=t("2877"),c=Object(n["a"])(o,s,a,!1,null,null,null);r["default"]=c.exports}}]);