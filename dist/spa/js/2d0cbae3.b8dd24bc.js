(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["2d0cbae3"],{"4b65":function(s,e,a){"use strict";a.r(e);var r=function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("q-page",{attrs:{padding:""}},[a("q-list",{staticClass:"main-box",attrs:{highlight:"",dark:s.LAYOUT.isDark}},[a("q-item-label",{attrs:{header:""}},[s._v("User setting")]),a("q-item",[a("q-item-section",{attrs:{avatar:""}},[a("q-avatar",{attrs:{rounded:"",color:"purple","text-color":"white",icon:"people"}})],1),a("q-item-section",{attrs:{label:""}},[a("q-item-label",[s._v(s._s(s.rsUser.name))]),a("q-item-label",{attrs:{caption:""}},[s._v(s._s(s.rsUser.email))])],1)],1),a("q-item-label",{attrs:{header:""}},[s._v("Change Password")]),a("q-item",[a("q-item-section",[a("form",{staticClass:"form",attrs:{novalidate:"","data-vv-scope":"form-pass"},on:{submit:function(e){return e.preventDefault(),s.validateForm("form-pass")}}},[a("div",{staticClass:"row q-col-gutter-xs"},[a("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:8",expression:"'required|min:8'"}],staticClass:"col-12 col-sm-4",attrs:{name:"newpassword",label:"New password",type:"password",dark:s.LAYOUT.isDark,error:s.errors.has("form-pass.newpassword"),"error-message":s.errors.first("form-pass.newpassword")},model:{value:s.rsPass.newpassword,callback:function(e){s.$set(s.rsPass,"newpassword",e)},expression:"rsPass.newpassword"}}),a("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"col-12 col-sm-4",attrs:{name:"c_newpassword",label:"Confirm New password",type:"password","no-pass-toggle":"",dark:s.LAYOUT.isDark,error:s.errors.has("form-pass.c_newpassword"),"error-message":s.errors.first("form-pass.c_newpassword")},model:{value:s.rsPass.c_newpassword,callback:function(e){s.$set(s.rsPass,"c_newpassword",e)},expression:"rsPass.c_newpassword"}}),a("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:8",expression:"'required|min:8'"}],staticClass:"col-12 col-sm-4",attrs:{name:"password",label:"Current password",type:"password",dark:s.LAYOUT.isDark,error:s.errors.has("form-pass.password"),"error-message":s.errors.first("form-pass.password")},model:{value:s.rsPass.password,callback:function(e){s.$set(s.rsPass,"password",e)},expression:"rsPass.password"}}),a("div",{staticClass:"col-12",attrs:{align:"right"}},[a("q-btn",{attrs:{color:"positive",size:"sm"},on:{click:function(e){return s.onChangePassword()}}},[s._v("Save")])],1)],1)])])],1)],1)],1)},t=[],o=(a("551c"),a("06db"),a("097d"),a("f751"),a("7f7f"),a("0ce1")),i={mixins:[o["a"]],data:function(){return{FORM:{resource:{api:"/api/v1/auth",uri:"/admin/configuration/profile"},options:{roles:{data:[],api:"/api/v1/auth/roles?mode=all"},permissions:{data:[],api:"/api/v1/auth/permissions?mode=all"}}},rsUser:{id:null,name:null,email:null},rsPass:{password:null,newpassword:null,c_newpassword:null}}},created:function(){this.routing()},computed:{RoleOptions:function(){return this.SHEET.roles.data.map(function(s){return{label:s.name,value:s.name}})},PermissionOptions:function(){return this.SHEET.permissions.data.map(function(s){return{label:s.name,value:s.name}})}},watch:{$route:"init"},methods:{test:function(){console.log(this.FORM)},routing:function(){var s=this;if(this.$store.state.admin.AUTH){console.log("store",this.$store.state.admin.AUTH.user);var e=this.$store.state.admin.AUTH.user;this.rsUser=Object.assign(this.rsUser,JSON.parse(JSON.stringify({id:e.id,name:e.name,email:e.email}))),console.log("user",this.rsUser),setTimeout(function(){s.FORM.loading=!0},800)}},onChangePassword:function(){var s=this;this.$validator.validateAll("form-pass").then(function(e){e?(s.FORM.loading=!0,s.$axios.set("POST","".concat(s.FORM.resource.api,"/change-password"),s.rsPass).then(function(e){s.FORM.response.success({mode:"edit",label:"change password"}),s.rsPass={password:null,newpassword:null,c_newpassword:null},s.$nextTick(function(){return s.$validator.reset()})}).catch(function(e){s.FORM.response.fields(e.response),s.FORM.response.error(e.response,"Submit"),s.FORM.onError(e.response,"form-pass")}).finally(function(){s.FORM.loading=!1}),console.warn("$validator",s.$validator)):s.$q.notify({color:"negative",icon:"error",position:"top-right",timeout:3e3,message:"Please complete the form fields"})})}}},n=i,l=a("2877"),d=Object(l["a"])(n,r,t,!1,null,null,null);e["default"]=d.exports}}]);